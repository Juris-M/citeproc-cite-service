<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Compositor</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Compositor</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Compositor<span class="signature">(opts, defaultJurisdiction, useDocsOnItems)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="Compositor"><span class="type-signature"></span>new Compositor<span class="signature">(opts, defaultJurisdiction, useDocsOnItems)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Methods for composing CSL-M JSON items
based on spreadsheet content.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>opts</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>command-line options set by the <code>getopts</code> package</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>defaultJurisdiction</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>short-code of the default jurisdiction</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>useDocsOnItems</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last"><p>CultExp IDs of items to be tagged with <code>showDocs</code></p></td>
        </tr>

    
    </tbody>
</table>






    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>opts</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>command-line options set by the <code>getopts</code> package</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>defaultJurisdiction</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>short-code of the default jurisdiction</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>useDocsOnItems</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last"><p>CultExp IDs of items to be tagged with <code>showDocs</code></p></td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line683">line 683</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="tagsMap"><span class="type-signature"></span>tagsMap<span class="type-signature"></span></h4>




<div class="description">
    <p>A list of tag prefixes to be set on
tags drawn from designated columns identified
by column nickname.</p>
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line731">line 731</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="composeAttachment"><span class="type-signature"></span>composeAttachment<span class="signature">(line)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Monolithic method to compose CSL JSON
attachment metadata for insertion into an item object.
A few highlights:</p>
<ul>
<li>the <code>empty.pdf</code> placeholder is not added</li>
<li>root CultExp ID extensions of A-D to indicate levels of appeal,
ER to indicate an expert report, and a-z to disambiguate
multiple expert reports, and be used solo or in combination</li>
<li>expert reports and judgments are tagged as such</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>line</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>the content of a spreadsheet line, keyed to
column nicknames</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line893">line 893</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="Compositor.html#getAbstract">Compositor#getAbstract</a></li>
        
            <li><a href="Compositor.html#filesPath">Compositor#filesPath</a></li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id="composeItem"><span class="type-signature"></span>composeItem<span class="signature">(line, suppressAbstract)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Compose a CSL-M JSON item.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>line</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>the content of a spreadsheet line, keyed to
column nicknames</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>suppressAbstract</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last"><p>omit the Abstract value from the composed item</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line950">line 950</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://docs.citationstyles.org/en/stable/specification.html">https://docs.citationstyles.org/en/stable/specification.html</a></li>
        
            <li><a href="https://citeproc-js.readthedocs.io/en/latest/csl-m/index.html">https://citeproc-js.readthedocs.io/en/latest/csl-m/index.html</a></li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id="filesPath"><span class="type-signature"></span>filesPath<span class="signature">(filename<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Combines several actions:</p>
<ul>
<li>Check for existence of a <code>files</code> subdirectory containing
attachment files, and throw an error if it does not exist</li>
<li>Copy an <code>empty.pdf</code> file into the <code>files</code> subdirectory
for possible use as a placeholder</li>
<li>Finally, return the path to the <code>files</code> subdirectory,
or to a file it contains, if specified.</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>filename</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>name of a specific attachment file</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line709">line 709</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getAbstract"><span class="type-signature"></span>getAbstract<span class="signature">(str)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    <p>Trim leading a trailing space from string
and return.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>str</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>abstract value from spreadsheet</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line851">line 851</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getDate"><span class="type-signature"></span>getDate<span class="signature">(docID, str)</span><span class="type-signature"> &rarr; {Object}</span></h4>
    

    



<div class="description">
    <p>Attempt to convert the content of the spreadsheet &quot;date&quot; column
to a valid date in CSL JSON array format. Spreadsheet dates should be set in
YYYY-MM-DD format to avoid ambiguity. Where dates not in this format are
invalid, impossible, or ambiguous, an error is thrown.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>docID</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>the &quot;id&quot; value from the spreadsheet</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>str</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>a string to parse as a date</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line791">line 791</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getRootID"><span class="type-signature"></span>getRootID<span class="signature">(str)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Return the first five characters of
a docID as the item identifier. (The code to append
the suffix value of an ID coded as an appellate
judgment has been commented out, because in
practice it appears that documents with these
suffixed IDs appear in the spreadsheets only
as child attachments of an item without suffix
representing a trial judgment. If that is not
always the case, adjustments of some sort
might be required.)</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>str</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>a CultExp docID</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line869">line 869</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getTags"><span class="type-signature"></span>getTags<span class="signature">(line, extraTags<span class="signature-attributes">opt, non-null</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    <p>Compose tags as a comma-delimited list,
setting the appropriate prefix on tags drawn from
spreadsheet columns. Columns containing a comma-
or semicolon-delimited list of tags are split
before processing, so that prefixes are applied
to all such tags.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>line</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>the content of a spreadsheet line, keyed to
column nicknames</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>extraTags</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>additional tags not included in the spreadsheet</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line762">line 762</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ColumnTool.html">ColumnTool</a></li><li><a href="Compositor.html">Compositor</a></li><li><a href="SetupTool.html">SetupTool</a></li></ul><h3>Global</h3><ul><li><a href="global.html#handleError">handleError</a></li><li><a href="global.html#run">run</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sat Nov 25 2023 13:54:40 GMT+0900 (Japan Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>