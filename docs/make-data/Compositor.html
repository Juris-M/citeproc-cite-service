<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Compositor</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Compositor</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Compositor<span class="signature">(opts, defaultJurisdiction, useDocsOnItems)</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    
    <h4 class="name" id="Compositor"><span class="type-signature"></span>new Compositor<span class="signature">(opts, defaultJurisdiction, useDocsOnItems)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Methods for composing CSL-M JSON items
  based on spreadsheet content.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>opts</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">command-line options set by the `getopts` package</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>defaultJurisdiction</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">short-code of the default jurisdiction</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>useDocsOnItems</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">CultExp IDs of items to be tagged with ``showDocs``</td>
        </tr>

    
    </tbody>
</table>






    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>opts</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">command-line options set by the `getopts` package</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>defaultJurisdiction</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">short-code of the default jurisdiction</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>useDocsOnItems</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            

            

            <td class="description last">CultExp IDs of items to be tagged with ``showDocs``</td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line683">line 683</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="tagsMap"><span class="type-signature"></span>tagsMap<span class="type-signature"></span></h4>




<div class="description">
    A list of tag prefixes to be set on
  tags drawn from designated columns identified
  by column nickname.
</div>







<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line731">line 731</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="composeAttachment"><span class="type-signature"></span>composeAttachment<span class="signature">(line)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Monolithic method to compose CSL JSON
  attachment metadata for insertion into an item object.
  A few highlights:
- the ``empty.pdf`` placeholder is not added
- root CultExp ID extensions of A-D to indicate levels of appeal,
  ER to indicate an expert report, and a-z to disambiguate
  multiple expert reports, and be used solo or in combination
- expert reports and judgments are tagged as such
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>line</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">the content of a spreadsheet line, keyed to 
  column nicknames</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line893">line 893</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="Compositor.html#getAbstract">Compositor#getAbstract</a></li>
        
            <li><a href="Compositor.html#filesPath">Compositor#filesPath</a></li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id="composeItem"><span class="type-signature"></span>composeItem<span class="signature">(line, suppressAbstract)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Compose a CSL-M JSON item.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>line</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">the content of a spreadsheet line, keyed to 
  column nicknames</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>suppressAbstract</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            

            

            <td class="description last">omit the Abstract value from the composed item</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line950">line 950</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://docs.citationstyles.org/en/stable/specification.html">https://docs.citationstyles.org/en/stable/specification.html</a></li>
        
            <li><a href="https://citeproc-js.readthedocs.io/en/latest/csl-m/index.html">https://citeproc-js.readthedocs.io/en/latest/csl-m/index.html</a></li>
        </ul>
    </dd>
    

    
</dl>




















        
            

    

    
    <h4 class="name" id="filesPath"><span class="type-signature"></span>filesPath<span class="signature">(filename<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Combines several actions:
- Check for existence of a ``files`` subdirectory containing
  attachment files, and throw an error if it does not exist
- Copy an ``empty.pdf`` file into the ``files`` subdirectory
  for possible use as a placeholder
- Finally, return the path to the ``files`` subdirectory,
  or to a file it contains, if specified.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>filename</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">name of a specific attachment file</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line709">line 709</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getAbstract"><span class="type-signature"></span>getAbstract<span class="signature">(str)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Trim leading a trailing space from string
  and return.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>str</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">abstract value from spreadsheet</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line851">line 851</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getDate"><span class="type-signature"></span>getDate<span class="signature">(docID, str)</span><span class="type-signature"> &rarr; {Object}</span></h4>
    

    



<div class="description">
    Attempt to convert the content of the spreadsheet "date" column
  to a valid date in CSL JSON array format. Spreadsheet dates should be set in
  YYYY-MM-DD format to avoid ambiguity. Where dates not in this format are
  invalid, impossible, or ambiguous, an error is thrown.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>docID</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the "id" value from the spreadsheet</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>str</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">a string to parse as a date</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line791">line 791</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getRootID"><span class="type-signature"></span>getRootID<span class="signature">(str)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Return the first five characters of
  a docID as the item identifier. (The code to append
  the suffix value of an ID coded as an appellate
  judgment has been commented out, because in
  practice it appears that documents with these
  suffixed IDs appear in the spreadsheets only
  as child attachments of an item without suffix
  representing a trial judgment. If that is not
  always the case, adjustments of some sort
  might be required.)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>str</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">a CultExp docID</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line869">line 869</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="getTags"><span class="type-signature"></span>getTags<span class="signature">(line, extraTags<span class="signature-attributes">opt, non-null</span>)</span><span class="type-signature"> &rarr; {string}</span></h4>
    

    



<div class="description">
    Compose tags as a comma-delimited list,
  setting the appropriate prefix on tags drawn from
  spreadsheet columns. Columns containing a comma-
  or semicolon-delimited list of tags are split
  before processing, so that prefixes are applied
  to all such tags.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>line</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">the content of a spreadsheet line, keyed to 
  column nicknames</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>extraTags</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Object></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">additional tags not included in the spreadsheet</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="make-data.js.html">make-data.js</a>, <a href="make-data.js.html#line762">line 762</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ColumnTool.html">ColumnTool</a></li><li><a href="Compositor.html">Compositor</a></li><li><a href="SetupTool.html">SetupTool</a></li></ul><h3>Global</h3><ul><li><a href="global.html#handleError">handleError</a></li><li><a href="global.html#run">run</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Nov 28 2023 09:51:16 GMT+0900 (Japan Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>